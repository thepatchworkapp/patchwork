import {
  capitalizeFirstLetter,
  createDynamicPathProxy,
  getClientConfig,
  listenKeys
} from "./chunk-YPIZHD6O.js";
import {
  require_react
} from "./chunk-RLJ2RCJQ.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// node_modules/better-auth/dist/client/react/react-store.mjs
var import_react = __toESM(require_react(), 1);
function useStore(store, options = {}) {
  let snapshotRef = (0, import_react.useRef)(store.get());
  const { keys, deps = [store, keys] } = options;
  let subscribe = (0, import_react.useCallback)((onChange) => {
    const emitChange = (value) => {
      if (snapshotRef.current === value) return;
      snapshotRef.current = value;
      onChange();
    };
    emitChange(store.value);
    if (keys == null ? void 0 : keys.length) return listenKeys(store, keys, emitChange);
    return store.listen(emitChange);
  }, deps);
  let get = () => snapshotRef.current;
  return (0, import_react.useSyncExternalStore)(subscribe, get, get);
}

// node_modules/better-auth/dist/client/react/index.mjs
function getAtomKey(str) {
  return `use${capitalizeFirstLetter(str)}`;
}
function createAuthClient(options) {
  const { pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, $store, atomListeners } = getClientConfig(options);
  let resolvedHooks = {};
  for (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[getAtomKey(key)] = () => useStore(value);
  return createDynamicPathProxy({
    ...pluginsActions,
    ...resolvedHooks,
    $fetch,
    $store
  }, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);
}
export {
  createAuthClient,
  useStore
};
//# sourceMappingURL=better-auth_react.js.map
